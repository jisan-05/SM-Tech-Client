import{r as a,A as u,d as x,j as e,V as d}from"./index-DCQw84vC.js";const y=()=>{const[l,c]=a.useState([]),[r,m]=a.useState("all"),{user:o}=a.useContext(u);a.useEffect(()=>{x.get("https://sm-tech-server.vercel.app/users",{withCredentials:!0}).then(s=>c(s.data)).catch(s=>console.error(s))},[]);const h=(s,t)=>{x.patch(`https://sm-tech-server.vercel.app/users/${s}/role`,{role:t},{withCredentials:!0}).then(n=>{n.data.success?(c(l.map(i=>i._id===s?{...i,role:t}:i)),d.success("User role updated successfully")):d.error("Failed to update role")}).catch(()=>d.error("Error updating role"))},p=r==="all"?l:l.filter(s=>s.role===r);return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-6 text-gray-800",children:"Manage User Roles"}),e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("select",{value:r,onChange:s=>m(s.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admins Only"}),e.jsx("option",{value:"user",children:"Users Only"})]})}),e.jsx("div",{className:"overflow-x-auto shadow-md rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Role"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:p.map(s=>{const t=s.email===(o==null?void 0:o.email);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-all",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:s.image,loading:"lazy",alt:s.name,className:"w-10 h-10 rounded-full ring-2 ring-gray-300"})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:s.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3 relative group",children:[e.jsx("span",{className:`inline-block text-sm font-semibold px-4 py-1 rounded-full 
                          ${s.role==="admin"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.role.charAt(0).toUpperCase()+s.role.slice(1)}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s.role,onChange:n=>h(s._id,n.target.value),disabled:t,className:`border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500
                            ${t?"bg-gray-100 cursor-not-allowed text-gray-500":""}`,children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]}),t&&e.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 whitespace-nowrap",children:"You cannot change your own role"})]})]})})]},s._id)})})]})})]})};export{y as default};
