import{r as a,j as e,d as u}from"./index-DCQw84vC.js";import{P as g,L as j,D as p,a as f,S as y,V as r,I as C,T as l}from"./react-pdf.browser-NLwWA8Cq.js";import{m as x,t as m}from"./index-DcUyFneu.js";import{l as w}from"./logo-BJZxaNBN.js";import"./iconBase-D9CqRmFI.js";const t=y.create({page:{flexDirection:"column",backgroundColor:"#ffffff",padding:20,fontFamily:"Helvetica"},logoContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},logo:{width:30,height:30},header:{textAlign:"center",fontSize:18,marginBottom:15,fontWeight:"bold",color:"#2c3e50"},reportInfo:{fontSize:10,color:"#7f8c8d",textAlign:"right"},table:{display:"table",width:"100%",borderStyle:"solid",borderWidth:1,borderColor:"#e0e0e0"},tableRow:{flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderColor:"#e0e0e0",padding:5,fontSize:9},tableHeader:{backgroundColor:"#3498db",color:"white",fontWeight:"bold",fontSize:10},colName:{width:"15%"},colId:{width:"8%"},colFather:{width:"12%"},colMother:{width:"12%"},colDob:{width:"8%"},colNid:{width:"12%"},colCourse:{width:"10%"},colEnroll:{width:"8%"},colComplete:{width:"8%"},colStatus:{width:"7%"},statusCompleted:{color:"#27ae60"},statusOngoing:{color:"#f39c12"},statusCertified:{color:"#2980b9"}}),S=({students:s})=>{const n=new Date().toLocaleDateString();return e.jsx(p,{children:e.jsxs(f,{size:"A4",orientation:"landscape",style:t.page,children:[e.jsxs(r,{style:t.logoContainer,children:[e.jsx(C,{src:w,style:t.logo}),e.jsxs(l,{style:t.reportInfo,children:["SM TECH STUDENT REPORT | Generated on: ",n," | Total Students: ",s.length]}),"SM TECH STUDENT REPORT"]}),e.jsxs(r,{style:t.table,children:[e.jsxs(r,{style:[t.tableRow,t.tableHeader],children:[e.jsx(l,{style:[t.tableCol,t.colName],children:"Student Name"}),e.jsx(l,{style:[t.tableCol,t.colId],children:"ID"}),e.jsx(l,{style:[t.tableCol,t.colFather],children:"Father's Name"}),e.jsx(l,{style:[t.tableCol,t.colMother],children:"Mother's Name"}),e.jsx(l,{style:[t.tableCol,t.colDob],children:"DOB"}),e.jsx(l,{style:[t.tableCol,t.colNid],children:"NID/BC No."}),e.jsx(l,{style:[t.tableCol,t.colCourse],children:"Course"}),e.jsx(l,{style:[t.tableCol,t.colEnroll],children:"Enrolled"}),e.jsx(l,{style:[t.tableCol,t.colComplete],children:"Completed"}),e.jsx(l,{style:[t.tableCol,t.colStatus],children:"Status"})]}),s.map((o,i)=>e.jsxs(r,{style:t.tableRow,children:[e.jsx(l,{style:[t.tableCol,t.colName],children:o.studentName}),e.jsx(l,{style:[t.tableCol,t.colId],children:o.studentId}),e.jsx(l,{style:[t.tableCol,t.colFather],children:o.fatherName}),e.jsx(l,{style:[t.tableCol,t.colMother],children:o.motherName}),e.jsx(l,{style:[t.tableCol,t.colDob],children:new Date(o.date_of_birth).toLocaleDateString()}),e.jsx(l,{style:[t.tableCol,t.colNid],children:o.nid_num}),e.jsx(l,{style:[t.tableCol,t.colCourse],children:o.course_name}),e.jsx(l,{style:[t.tableCol,t.colEnroll],children:new Date(o.enrollment_date).toLocaleDateString()}),e.jsx(l,{style:[t.tableCol,t.colComplete],children:new Date(o.course_complete_date).toLocaleDateString()}),e.jsx(l,{style:[t.tableCol,t.colStatus,o.course_status==="completed"?t.statusCompleted:o.course_status==="ongoing"?t.statusOngoing:t.statusCertified],children:o.course_status.toUpperCase()})]},i))]})]})})},R=()=>{const[s,n]=a.useState([]),[o,i]=a.useState(!0),[h,b]=a.useState(null);return a.useEffect(()=>{(async()=>{try{const d=await u.get("https://sm-tech-server.vercel.app/student",{withCredentials:!0});n(d.data)}catch(d){b("Failed to load student data"),console.error("Error fetching students:",d)}finally{i(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50 p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-md p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Student Report Generator"}),e.jsx("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-300 rounded-lg",children:o?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(x,{className:"animate-spin text-blue-500 text-4xl mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading student data..."})]}):h?e.jsxs("div",{className:"text-red-500 text-center",children:[e.jsx("p",{children:h}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Retry"})]}):s.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx(m,{className:"text-red-500 text-5xl mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Ready to generate PDF report for ",s.length," students"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Includes all student information in a printable format"})]}),e.jsx(g,{document:e.jsx(S,{students:s}),fileName:`Students_Report_${new Date().toISOString().split("T")[0]}.pdf`,className:"px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition flex items-center gap-2",children:({loading:c})=>e.jsxs(e.Fragment,{children:[c?e.jsx(x,{className:"animate-spin"}):e.jsx(m,{}),c?"Generating PDF...":"Download Student Report"]})})]}):e.jsx("p",{className:"text-gray-500",children:"No student data available"})})]}),e.jsx(j,{className:"z-0 text-3xl",children:"Hello"})]})};export{R as default};
