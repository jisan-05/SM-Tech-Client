import{r as o,b as $,h as I,j as e,d as G,V as g}from"./index-DCQw84vC.js";import{D as J}from"./index.es-B154SoZd.js";import{a as K}from"./utils-CKwcizm7.js";import"./clsx-B-dksMZM.js";const ee=()=>{const[u,m]=o.useState(!1),[x,v]=o.useState(new Date),b=$(),j=I(),{_id:y,category:f,course_description:N,course_duration:w,course_instructor:_,course_price:C,course_title:k,learn_bio:L,whatYoullLearn:p=[],dataToSend:h=[]}=j,[l,c]=o.useState(p.length?p:[""]),V=()=>{c([...l,""])},S=a=>{const t=[...l];t.splice(a,1),c(t)},D=(a,t)=>{const r=[...l];r[a]=t,c(r)},[n,i]=o.useState(h.length?h.map(a=>({title:a.title})):[{title:""}]),R=(a,t)=>{const r=[...n];r[a].title=t,i(r)},E=()=>{i([...n,{title:""}])},P=a=>{const t=[...n];t.splice(a,1),i(t)},F=async a=>{a.preventDefault(),m(!0);const t=a.target,r=t.course_title.value,q=t.course_instructor.value,z=x,A=t.category.value,B=t.course_price.value,H=t.course_duration.value,M=t.description.value,Y=t.banner_image.files[0],T=t.learn_bio.value,U=n.map((s,d)=>({week:d+1,title:s.title})),W=l.filter(s=>s.trim()!=="");try{const s=await K(Y),d={course_title:r,course_instructor:q,enrollment_deadline:z,category:A,course_price:B,course_duration:H,course_banner:s,course_description:M,learn_bio:T,whatYoullLearn:W,dataToSend:U};await G.put(`https://sm-tech-server.vercel.app/updateCourse/${y}`,d,{withCredentials:!0}),g.success("Course Updated Successfully"),t.reset(),b("/dashboardLayout/manageCourse")}catch(s){console.error(s),g.error("Course can't be updated now! Try again.")}finally{m(!1)}};return e.jsx("div",{className:"flex justify-center items-center min-h-[calc(100vh-306px)] my-12",children:e.jsxs("section",{className:"p-2 md:p-6 mx-auto bg-white rounded-md shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 text-center",children:"Update Your Existing Course"}),e.jsx("hr",{}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:"course_title",children:"Course Title"}),e.jsx("input",{required:!0,id:"course_title",defaultValue:k,name:"course_title",type:"text",className:"block w-full px-4 py-2 mt-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:"course_instructor",children:"Instructor Name"}),e.jsx("input",{required:!0,defaultValue:_,id:"course_instructor",name:"course_instructor",type:"text",className:"block w-full px-4 py-2 mt-2 border rounded-md"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-gray-700",children:"Enrollment Deadline"}),e.jsx(J,{className:"text-black border p-2 rounded-md",selected:x,onChange:a=>v(a)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-gray-700",htmlFor:"category",children:"Category"}),e.jsxs("select",{required:!0,name:"category",defaultValue:f,id:"category",className:"border p-2 rounded-md",children:[e.jsx("option",{value:"electrical",children:"Electrical Engineering"}),e.jsx("option",{value:"mechanical",children:"Mechanical Engineering"}),e.jsx("option",{value:"civil",children:"Civil Engineering"}),e.jsx("option",{value:"computer",children:"Computer Science & Engineering"}),e.jsx("option",{value:"textile",children:"Textile Engineering"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:"course_price",children:"Course Price"}),e.jsx("input",{required:!0,id:"course_price",defaultValue:C,name:"course_price",type:"number",className:"block w-full px-4 py-2 mt-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:"course_duration",children:"Course Duration"}),e.jsx("input",{required:!0,defaultValue:w,id:"course_duration",name:"course_duration",type:"number",className:"block w-full px-4 py-2 mt-2 border rounded-md"})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[e.jsx("label",{className:"text-gray-700",htmlFor:"course_banner",children:"Course Banner (Image)"}),e.jsx("input",{required:!0,type:"file",id:"course_banner",name:"banner_image",accept:"image/*"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[e.jsx("label",{className:"text-gray-700",htmlFor:"description",children:"Description"}),e.jsx("textarea",{required:!0,defaultValue:N,id:"description",name:"description",className:"block w-full px-4 py-2 mt-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:"learn_bio",children:"What You'll Learn Bio"}),e.jsx("input",{required:!0,id:"learn_bio",name:"learn_bio",defaultValue:L,placeholder:"Write What You'll Learn in Bio ...",type:"text",className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"text-gray-700 block mb-2",children:"What You'll Learn"}),e.jsxs("div",{className:"space-y-3",children:[l.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:r=>D(t,r.target.value),placeholder:`Learning point ${t+1}`,className:"flex-1 block w-full px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-md"}),l.length>1&&e.jsx("button",{type:"button",onClick:()=>S(t),className:"p-2 text-red-500 hover:text-red-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},t)),e.jsxs("button",{type:"button",onClick:V,className:"mt-2 flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Learning Point"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"text-gray-700 block mb-2",children:"Add Course Curriculum"}),e.jsxs("div",{className:"space-y-3",children:[n.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:a.title,onChange:r=>R(t,r.target.value),placeholder:`Curriculum ${t+1}`,className:"flex-1 block w-full px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-md"}),n.length>1&&e.jsx("button",{type:"button",onClick:()=>P(t),className:"p-2 text-red-500 hover:text-red-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},t)),e.jsxs("button",{type:"button",onClick:E,className:"mt-2 flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Curriculum"]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:u,className:"cursor-pointer px-8 py-2.5 text-white bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none",children:u?e.jsxs("span",{className:"flex items-center gap-2",children:["Updating...",e.jsx("span",{className:"loading loading-bars loading-md"})]}):"Update Course"})})]})]})})};export{ee as default};
