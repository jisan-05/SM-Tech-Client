import{r,i as v,b as w,d as x,V as i,j as e}from"./index-DCQw84vC.js";import{c as k}from"./utils-CKwcizm7.js";const E=()=>{const[m,c]=r.useState(!1),{id:d}=v(),f=w(),[l,h]=r.useState(null),[s,u]=r.useState([]),[o,g]=r.useState("");r.useEffect(()=>{x.get(`https://sm-tech-server.vercel.app/teachers/${d}`).then(a=>{h(a.data),u(a.data.skills||[])}).catch(a=>{i.error("Failed to load teacher data"),console.error(a)})},[d]);const y=()=>{o&&!s.includes(o)&&(u([...s,o]),g(""))},j=a=>{u(s.filter(t=>t!==a))},N=async a=>{a.preventDefault(),c(!0);const t=new FormData(a.target),b={name:t.get("name"),designation:t.get("designation"),specialization:t.get("specialization"),education:t.get("education"),experience:t.get("experience"),bio:t.get("bio"),whatsapp:t.get("whatsapp"),facebook:t.get("facebook"),skills:s},p=t.get("image");if(p&&p.size>0)try{const n=await k(p);b.photoURL=n}catch{i.error("Image upload failed"),c(!1);return}try{await x.put(`https://sm-tech-server.vercel.app/teachers/${d}`,b,{withCredentials:!0}),i.success("Teacher updated successfully!"),f("/dashboardLayout/manageTeacher")}catch(n){console.error(n),i.error("Failed to update teacher")}c(!1)};return l?e.jsxs("div",{className:"max-w-2xl mx-auto mt-8 p-8 bg-white shadow-lg rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Teacher"}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Full Name*"}),e.jsx("input",{type:"text",name:"name",defaultValue:l.name,placeholder:"e.g. Sadia Rahman",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Designation*"}),e.jsx("input",{type:"text",name:"designation",defaultValue:l.designation,placeholder:"e.g. Web Instructor",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Specialization*"}),e.jsx("input",{type:"text",name:"specialization",defaultValue:l.specialization,placeholder:"e.g. MERN Stack Developer",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Education*"}),e.jsx("input",{type:"text",name:"education",defaultValue:l.education,placeholder:"e.g. MSc in Computer Science",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Experience*"}),e.jsx("input",{type:"text",name:"experience",defaultValue:l.experience,placeholder:"e.g. 5+ years industry experience",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"WhatsApp (Optional)"}),e.jsx("input",{type:"url",name:"whatsapp",defaultValue:l.whatsapp,placeholder:"https://wa.me/+88017******",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Facebook (Optional)"}),e.jsx("input",{type:"url",name:"facebook",defaultValue:l.facebook,placeholder:"https://facebook.com/username",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Bio*"}),e.jsx("textarea",{name:"bio",rows:"3",defaultValue:l.bio,placeholder:"Short professional bio...",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Skills (Optional)"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:o,onChange:a=>g(a.target.value),placeholder:"Add a skill",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:y,className:"bg-blue-100 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-200 transition",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(a=>e.jsxs("div",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-full flex items-center",children:[a,e.jsx("button",{type:"button",onClick:()=>j(a),className:"ml-2 text-blue-400 hover:text-blue-700",children:"Ã—"})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Profile Image"}),e.jsx("input",{type:"file",name:"image",accept:"image/*",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition flex justify-center items-center",disabled:m,children:m?e.jsx("span",{className:"loading loading-spinner text-white"}):"Update Teacher"})]})]}):e.jsx("p",{className:"text-center mt-6",children:"Loading..."})};export{E as default};
